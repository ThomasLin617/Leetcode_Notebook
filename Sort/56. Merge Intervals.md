以下是依照你提供的格式，針對題目 **56. Merge Intervals** 撰寫的整理內容，含原始寫法、優化寫法、觀念、複雜度分析與圖表佔位符。

---

# 56. Merge Intervals

## code (First)

```python
class Solution:
    def merge(self, intervals: List[List[int]]) -> List[List[int]]:
        res = []
        intervals.sort()
        for i in range(1, len(intervals)):
            if intervals[i][0] <= intervals[i-1][1]:
                intervals[i][0] = min(intervals[i-1][0], intervals[i][0])
                intervals[i][1] = max(intervals[i-1][1], intervals[i][1])
            else:
                res.append(intervals[i-1])
        res.append(intervals[-1])
        return res
```

## code (Optimized based on the first solution)

```python
class Solution:
    def merge(self, intervals: List[List[int]]) -> List[List[int]]:
        if not intervals:
            return []
        
        intervals.sort()
        res = [intervals[0]]
        
        for curr in intervals[1:]:
            last = res[-1]
            if curr[0] <= last[1]:
                last[1] = max(last[1], curr[1])
            else:
                res.append(curr)
                
        return res
```

## idea

The goal of this problem is to merge all overlapping intervals in a list. My initial approach (First) iterates through sorted intervals and merges them by modifying the original `intervals` array directly. It compares each interval with the previous one and appends to the result list only when no overlap is found. The last interval is added manually after the loop.

Later, I optimized the logic by maintaining a separate result list (res) and always comparing the current interval (`curr`) with the last merged interval (`res[-1]`). This makes the code easier to read and avoids modifying the original list. It also eliminates the need to manually append the last interval.

**Complexity:**

* First solution: Time O(n log n), Space O(1) (if in-place allowed; else O(n))
* Optimized solution: Time O(n log n), Space O(n)

## percentage (First)

![](/assetPic/mif.png)

## percentage (Optimized based on the first solution)

![](/assetPic/mis.png)
